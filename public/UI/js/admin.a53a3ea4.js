(function(t){function e(e){for(var s,n,o=e[0],r=e[1],c=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(m.length)m.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(l.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={admin:0},l=[];function n(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-04c44ed4":"3761733e"}[t]+".js"}function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=i[t]=[e,s]}));e.push(a[2]=s);var l,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=n(t);var c=new Error;l=function(e){r.onerror=r.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),l=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",c.name="ChunkLoadError",c.type=s,c.request=l,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:r})}),12e4);r.onerror=r.onload=l,document.head.appendChild(r)}return Promise.all(e)},o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;l.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(t,e,a){t.exports=a("0de0")},"0de0":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a("div",{class:{"nav-open":t.$sidebar.showSidebar}},[a("notifications"),a("router-view")],1)])],1)},l=[],n={name:"App",data:function(){return{}},methods:{}},o=n,r=a("2877"),c=Object(r["a"])(o,i,l,!1,null,null,null),d=c.exports,u=a("dd1d"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("side-bar",{attrs:{title:"家友會管理系統"}},[a("template",{slot:"links"},t._l(t.$permission,(function(e,s){return a("sidebar-item",{key:s,attrs:{link:e}},t._l(e.children,(function(t,e){return a("sidebar-item",{key:e,attrs:{ifBackstagep:!0,link:t}})})),1)})),1)],2),""!=t.$UserInf.Random?a("div",{staticClass:"main-panel"},[a("top-navbar"),a("dashboard-content",{nativeOn:{click:function(e){return t.toggleSidebar(e)}}})],1):t._e()],1)},p=[],h=(a("5319"),a("ac1f"),a("8855")),f=a("fd32"),b=a.n(f),v={extends:h["a"],data:function(){return{}},watch:{$route:{handler:function(t,e){this.$sidebar.showSidebar=!1},deep:!0}},created:function(){if(null==this.$UserInf.Random||""==this.$UserInf.Random){var t=this.$cookies.get("random");null!=t&&""!=t?this.$API.fastLogin(t):b.a.init({liffId:"1655869245-kZE0rW6B"}).then((function(){var t=b.a.isLoggedIn();t&&b.a.logout(),window.location.replace("https://ccf.bllin.net/UI/admin.html")}))}},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}}},g=v,y=Object(r["a"])(g,m,p,!1,null,null,null),$=y.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"calc(100vh - 93px)","text-align":"center","font-size":"1rem","font-weight":"600"}},[t._v(" 歡迎登入家友會管理系統!!"),a("br"),t._l(t.$permission,(function(e,s){return a("div",{key:s,staticClass:"col-2",staticStyle:{float:"left","margin-top":"15px"}},[a("drop-down",[a("p-button",{staticClass:"dropdown-toggle",attrs:{slot:"title","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",type:"primary",outline:"",round:""},slot:"title"},[t._v(" "+t._s(e.name)+" ")]),a("h6",{staticClass:"dropdown-header"},[t._v("請選擇跳轉功能")]),t._l(e.children,(function(e,s){return a("a",{key:s+"c",staticClass:"dropdown-item",on:{click:function(a){return t.linkPage(e.path)}}},[t._v(t._s(e.name))])}))],2)],1)}))],2)},C=[],w={extends:h["a"],methods:{linkPage:function(t){this.$router.push(t)}}},k=w,x=Object(r["a"])(k,_,C,!1,null,null,null),P=(x.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("p-button",{attrs:{type:"info",size:"sm",icon:""},on:{click:t.addAction}},[a("i",{staticClass:"nc-icon ti-plus"})]),t.tableData!=[]?a("el-table",{attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{"min-width":"50",type:"index"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"name",label:"活動名稱"}}),a("el-table-column",{attrs:{"min-width":"200",prop:"startdate",label:"開始時間"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"enddate",label:"結束時間"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"mems",label:"參加會員"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"principalName",label:"負責人"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"typeName",label:"種類"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"number_people",label:"需求人數"}}),a("el-table-column",{attrs:{"min-width":"200","header-align":"right",label:"自動號召夥伴"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"text-right"},[Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()>new Date?a("el-tooltip",{attrs:{content:"自動號召夥伴","open-delay":200,placement:"top"}},[a("el-switch",{on:{change:function(e){return t.autoInviteChange(s)}},model:{value:s.auto_invite,callback:function(e){t.$set(s,"auto_invite",e)},expression:"row.auto_invite"}})],1):t._e(),Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()<=new Date?a("span",{staticStyle:{color:"green","font-weight":"600"}},[t._v("已結束")]):t._e()],1)}}],null,!1,722556111)}),a("el-table-column",{attrs:{"min-width":"100",label:"修改參加會員"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[a("p-button",{attrs:{type:"success",size:"sm",simple:"",icon:""},on:{click:function(e){return t.updateMemsD(s)}}},[a("i",{staticClass:"nc-icon nc-settings"})])],1)}}],null,!1,1075983114)}),a("el-table-column",{attrs:{"min-width":"100",label:"刪除"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()>new Date?a("p-button",{attrs:{type:"danger",size:"sm",simple:"",icon:""},on:{click:function(e){return t.delAction(s.aid)}}},[a("i",{staticClass:"nc-icon nc-settings"})]):t._e()],1)}}],null,!1,21012995)}),a("el-table-column",{attrs:{"min-width":"100",label:"發送Line提醒"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()>new Date?a("p-button",{attrs:{type:"info",size:"sm",simple:"",icon:""},on:{click:function(e){return t.sendLineActionMsg(s.aid)}}},[a("i",{staticClass:"nc-icon nc-settings"})]):t._e()],1)}}],null,!1,1368858672)}),a("el-table-column",{attrs:{"min-width":"100",label:"發送Line號召"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()>new Date?a("p-button",{attrs:{type:"primary",size:"sm",simple:"",icon:""},on:{click:function(e){return t.sendActionInviteMsg(s.aid)}}},[a("i",{staticClass:"nc-icon nc-settings"})]):t._e()],1)}}],null,!1,1094237493)}),a("el-table-column",{attrs:{"min-width":"100",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()<=new Date?a("span",{staticStyle:{color:"red","font-weight":"600"}},[t._v("已結束")]):t._e(),Date.parse(s.enddate.replace(/\-/g,"/")).valueOf()>new Date?a("span",{staticStyle:{color:"green","font-weight":"600"}},[t._v("未開始")]):t._e()])}}],null,!1,3545614350)})],1):t._e(),a("modal",{attrs:{show:t.showModals.addAction,headerClasses:"justify-content-center"},on:{"update:show":function(e){return t.$set(t.showModals,"addAction",e)}}},[a("h4",{staticClass:"title title-up",attrs:{slot:"header"},slot:"header"},[t._v("新增活動")]),a("card",{staticClass:"form-horizontal"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("活動名稱")]),a("div",{staticClass:"col-sm-8"},[a("fg-input",{attrs:{error:t.getError("email"),type:"text",name:"requiredText"},model:{value:t.model.action,callback:function(e){t.$set(t.model,"action",e)},expression:"model.action"}})],1)]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("開始時間")]),a("div",{staticClass:"col-sm-8"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","min-datetime":t.minDatetime,"use12-hour":""},model:{value:t.model.stdate,callback:function(e){t.$set(t.model,"stdate",e)},expression:"model.stdate"}})],1)]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("結束時間")]),a("div",{staticClass:"col-sm-8"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","min-datetime":t.minDatetime,"use12-hour":""},model:{value:t.model.eddate,callback:function(e){t.$set(t.model,"eddate",e)},expression:"model.eddate"}})],1)]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("種類")]),a("div",{staticClass:"col-sm-8"},[a("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇活動種類"},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.selects,(function(t){return a("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1)]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("需求人數")]),a("div",{staticClass:"col-sm-8"},[a("fg-input",{attrs:{placeholder:"Number",type:"number"},model:{value:t.model.number_people,callback:function(e){t.$set(t.model,"number_people",e)},expression:"model.number_people"}})],1)])]),a("template",{slot:"footer"},[a("p-button",{attrs:{type:"info"},on:{click:t.confirmAddAction}},[t._v("確定")]),a("p-button",{attrs:{type:"danger"},nativeOn:{click:function(e){return t.cancelAddAction(e)}}},[t._v("取消")])],1)],2),a("modal",{attrs:{show:t.showModals.updateMems,headerClasses:"justify-content-center"},on:{"update:show":function(e){return t.$set(t.showModals,"updateMems",e)}}},[a("h4",{staticClass:"title title-up",attrs:{slot:"header"},slot:"header"},[t._v("修改參加會員")]),a("model-select",{attrs:{options:t.options,placeholder:"輸入會員名稱"},model:{value:t.itemxx,callback:function(e){t.itemxx=e},expression:"itemxx"}}),a("p-button",{attrs:{type:"info"},on:{click:t.addUpdateMem}},[t._v("新增會員")]),a("p-button",{attrs:{type:"warning"},on:{click:t.addUpdatePrincipal}},[t._v("新增負責人")]),a("hr"),t._v(" 人員 "),t._l(t.updateMems,(function(e,s){return a("el-tag",{key:e,staticStyle:{position:"relative"},attrs:{type:"primary"}},[t._v(" "+t._s(e)+" "),a("span",{staticStyle:{position:"relative",right:"0",top:"-5px",color:"black",cursor:"pointer"},on:{click:function(e){return t.memHandleClose(s)}}},[t._v("x")])])})),a("hr"),t._v(" 負責人 "),t._l(t.updatePrincipal,(function(e,s){return a("el-tag",{key:e+"p",staticStyle:{position:"relative"},attrs:{type:"primary"}},[t._v(" "+t._s(e)+" "),a("span",{staticStyle:{position:"relative",right:"0",top:"-5px",color:"black",cursor:"pointer"},on:{click:function(e){return t.priHandleClose(s)}}},[t._v("x")])])})),a("template",{slot:"footer"},[a("p-button",{attrs:{type:"info"},on:{click:t.confirmUpdateMem}},[t._v("確定")]),a("p-button",{attrs:{type:"danger"},nativeOn:{click:function(e){return t.cancelUpdateMem(e)}}},[t._v("取消")])],1)],2)],1)}),D=[],A=(a("159b"),a("b64b"),a("07ac"),a("a15b"),a("1276"),a("a434"),a("fb6a"),a("b410")),S={extends:h["a"],components:{ModelSelect:A["ModelSelect"]},data:function(){return{updateRow:{},updateMems:[],updatePrincipal:[],itemxx:{value:"",text:""},minDatetime:(new Date).toISOString(),tableData:[],showModals:{addAction:!1,updateMems:!1},model:{action:"",stdate:"",eddate:"",type:"",number_people:0},selects:[{value:"0",label:"聯誼會活動"},{value:"1",label:"家友會活動"},{value:"2",label:"祥和志工隊活動"}],oldContent:"",ifedit:0}},computed:{options:function(){var t=this,e=[];return Object.keys(this.$midTable).forEach((function(a,s){e.push({value:a,text:Object.values(t.$midTable)[s]})})),e}},created:function(){this.$PostValue({paramName:"$loading",data:!0}),this.$API.getActionList(null,null,this.getActionListCallback)},methods:{addUpdatePrincipal:function(){-1==this.updatePrincipal.indexOf(this.itemxx.text)&&""!=this.itemxx.text?this.updatePrincipal=[this.itemxx.text]:(this.itemxx={value:"",text:""},alert("已有此會員!"))},confirmUpdateMem:function(){var t=this,e=[];this.updateMems.forEach((function(a){var s=Object.values(t.$midTable).indexOf(a);if(s>-1){var i=Object.keys(t.$midTable)[s];e.push(i)}}));var a=e.join(",");if(a!=this.updateRow.actionmem)this.$PostValue({paramName:"$loading",data:!0}),this.$API.addActionMember(this.updateRow.aid,a,this.addActionMemberCallback);else{var s=Object.values(this.$midTable).indexOf(this.updatePrincipal[0]);if(s>-1){var i=Object.keys(this.$midTable)[s];if(i!=this.updateRow.principal)return this.$PostValue({paramName:"$loading",data:!0}),void this.$API.addActionPrincipal(this.updateRow.aid,i,this.addActionPrincipalCallback)}alert("發生錯誤!"),this.showModals.updateMems=!1}},addActionMemberCallback:function(){if(this.updatePrincipal.length>0){var t=Object.values(this.$midTable).indexOf(this.updatePrincipal[0]);if(t>-1){var e=Object.keys(this.$midTable)[t];if(this.$PostValue({paramName:"$loading",data:!0}),e!=this.updateRow.principal)return void this.$API.addActionPrincipal(this.updateRow.aid,e,this.addActionPrincipalCallback)}}this.showModals.updateMems=!1,this.$API.getActionList(null,null,this.getActionListCallback),alert("新增成功!")},addActionPrincipalCallback:function(){this.$PostValue({paramName:"$loading",data:!0}),this.$API.getActionList(null,null,this.getActionListCallback),alert("新增成功!"),this.showModals.updateMems=!1},cancelUpdateMem:function(){this.updateMems=[],this.updatePrincipal=[],this.itemxx={value:"",text:""},this.showModals.updateMems=!1},addUpdateMem:function(){-1==this.updateMems.indexOf(this.itemxx.text)&&""!=this.itemxx.text?this.updateMems.push(this.itemxx.text):(this.itemxx={value:"",text:""},alert("已有此會員!"))},updateMemsD:function(t){this.updateRow=t,this.updateMems=""==this.updateRow.mems?[]:this.updateRow.mems.split(","),this.updatePrincipal=""==this.updateRow.principalName?[]:[this.updateRow.principalName],this.showModals.updateMems=!0},memHandleClose:function(t){this.updateMems.splice(t,1)},priHandleClose:function(t){this.updatePrincipal.splice(this.updatePrincipal.indexOf(t),1)},getActionListCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),1===t.callState?alert(t.errorMsg):this.tableData=t},addAction:function(){this.showModals.addAction=!0},getError:function(t){return""},confirmAddAction:function(){var t=this.model.stdate.replace("T"," ");t=t.slice(0,19);var e=this.model.eddate.replace("T"," ");e=e.slice(0,19),this.model.action.length>20?alert("活動名稱超過20個字元!"):""==this.model.action||""==this.model.stdate||""==this.model.eddate||""==this.model.type||0==this.model.number_people?alert("請輸入完整資訊!!"):new Date(e).getTime()-new Date(t).getTime()<18e5?alert("活動時間小於30分鐘!"):(this.$PostValue({paramName:"$loading",data:!0}),this.$API.addAction(this.model.action,t,e,this.model.type,this.model.number_people,this.addActionCallback))},cancelAddAction:function(){this.model.action="",this.model.stdate="",this.model.eddate="",this.model.type="",this.model.number_people=0,this.showModals.addAction=!1},addActionCallback:function(t){this.$PostValue({paramName:"$loading",data:!0}),alert("活動新增成功!"),this.showModals.addAction=!1,this.$API.getActionList(null,null,this.getActionListCallback)},delAction:function(t){confirm("確定刪除？")&&(this.$PostValue({paramName:"$loading",data:!0}),this.$API.delAction(t,this.delActionCallback))},delActionCallback:function(){this.$PostValue({paramName:"$loading",data:!0}),alert("活動刪除成功!"),this.$API.getActionList(null,null,this.getActionListCallback)},sendLineActionMsg:function(t){confirm("確定送出訊息？")&&(this.$PostValue({paramName:"$loading",data:!0}),this.$API.sendLineActionMsg(t,this.sendLineActionMsgCallback))},sendActionInviteMsg:function(t){confirm("確定送出訊息？")&&(this.$PostValue({paramName:"$loading",data:!0}),this.$API.sendActionInvite(t,this.sendActionInviteMsgCallback))},sendActionInviteMsgCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),t.callState>1?alert("Line訊息發送失敗"):alert("Line訊息發送成功!")},sendLineActionMsgCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),t.errorMid.length>0?alert("會員id發送Line訊息失敗:"+t.errorMid.join(",")):alert("Line訊息發送成功!")},tableRowClassName:function(t){var e=t.row;t.rowIndex;return Date.parse(e.enddate.replace(/\-/g,"/")).valueOf()>new Date?"table-info":Date.parse(e.enddate.replace(/\-/g,"/")).valueOf()<=new Date?"table-danger":""},autoInviteChange:function(t){this.$API.updateAutoInvite(t.aid,t.auto_invite,(function(e){1==e.callState&&(t.auto_invite=!t.auto_invite)}))}}},M=S,N=Object(r["a"])(M,P,D,!1,null,null,null),T=N.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("p-button",{attrs:{type:"info",size:"sm",icon:""},on:{click:t.addRole}},[a("i",{staticClass:"nc-icon ti-plus"})]),a("el-table",{attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{"min-width":"100",prop:"name",label:"角色名稱"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"permissionName",label:"權限"}}),a("el-table-column",{attrs:{"min-width":"100","header-align":"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"text-right"},[a("el-tooltip",{attrs:{content:"修改權限","open-delay":300,placement:"top"}},[a("p-button",{attrs:{type:"success",size:"sm",icon:""},on:{click:function(e){return t.updatePermissions(s)}}},[a("i",{staticClass:"nc-icon nc-settings"})])],1)],1)}}])})],1),a("modal",{attrs:{show:t.showModals.addRole,headerClasses:"justify-content-center"},on:{"update:show":function(e){return t.$set(t.showModals,"addRole",e)}}},[a("h4",{staticClass:"title title-up",attrs:{slot:"header"},slot:"header"},[t._v("新增角色")]),a("card",{staticClass:"form-horizontal"},[a("b-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"3"}},[a("label",{attrs:{for:"input-default"}},[t._v("角色名稱:")])]),a("b-col",{attrs:{sm:"9"}},[a("b-form-input",{attrs:{id:"input-default",placeholder:"請輸入您的角色名稱"},model:{value:t.selectedRoleName,callback:function(e){t.selectedRoleName=e},expression:"selectedRoleName"}})],1)],1),a("b-form-group",{attrs:{label:"選擇權限"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.ariaDescribedby;return[a("b-form-checkbox-group",{attrs:{options:t.permissionOptions,"aria-describedby":s,name:"flavour-2a",stacked:""},model:{value:t.selectedPermission,callback:function(e){t.selectedPermission=e},expression:"selectedPermission"}})]}}])})],1),a("template",{slot:"footer"},[a("p-button",{attrs:{type:"info"},on:{click:t.confirmAddRole}},[t._v("確定")]),a("p-button",{attrs:{type:"danger"},on:{click:t.cancelAddRole}},[t._v("取消")])],1)],2),a("modal",{attrs:{show:t.showModals.updatePermissions,headerClasses:"justify-content-center"},on:{"update:show":function(e){return t.$set(t.showModals,"updatePermissions",e)}}},[a("h4",{staticClass:"title title-up",attrs:{slot:"header"},slot:"header"},[t._v("修改角色權限")]),a("card",{staticClass:"form-horizontal"},[a("b-form-group",{attrs:{label:"選擇權限"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.ariaDescribedby;return[a("b-form-checkbox-group",{attrs:{options:t.permissionOptions,"aria-describedby":s,name:"flavour-2a",stacked:""},model:{value:t.selectedUpdatePermission,callback:function(e){t.selectedUpdatePermission=e},expression:"selectedUpdatePermission"}})]}}])})],1),a("template",{slot:"footer"},[a("p-button",{attrs:{type:"info"},on:{click:t.confirmUpdatePermission}},[t._v("確定")]),a("p-button",{attrs:{type:"danger"},on:{click:t.cancelUpdatePermission}},[t._v("取消")])],1)],2)],1)},O=[],R=(a("4de4"),a("d81d"),a("a9e3"),{extends:h["a"],data:function(){return{tableData:[],permissionNameIndex:{},permissionNameTable:[],showModals:{addRole:!1,updatePermissions:!1},selectedPermission:[],selectedRoleName:"",permissionOptions:[],selectedUpdatePermission:[],selectedUpdateMType:""}},mounted:function(){this.$API.getPermission(this.getPermissionCallback)},methods:{confirmAddRole:function(){if(""!=this.selectedRoleName&&this.selectedPermission!=[]){this.$PostValue({paramName:"$loading",data:!0});var t=this.selectedPermission.map((function(t){return t.callApi})).filter((function(t){return""!=t})).join(","),e=this.selectedPermission.map((function(t){return t.id})).filter((function(t){return""!=t})).join(",");this.$API.addRolePermission(this.selectedRoleName,e,t,this.addRolePermissionCallback)}else alert("請輸入完整內容!")},addRolePermissionCallback:function(){this.$API.getPermission(this.getPermissionCallback),alert("角色新增成功!"),this.selectedRoleName="",this.selectedPermission=[],this.showModals.addRole=!1,this.$PostValue({paramName:"$loading",data:!1})},cancelAddRole:function(){this.selectedRoleName="",this.selectedPermission=[],this.showModals.addRole=!1},tableRowClassName:function(t){t.row;var e=t.rowIndex;return 0===e?"table-success":2===e?"table-info":4===e?"table-danger":6===e?"table-warning":""},addRole:function(){this.showModals.addRole=!0},confirmUpdatePermission:function(){var t=this.selectedUpdatePermission.map((function(t){return t.callApi})).filter((function(t){return""!=t})).join(","),e=this.selectedUpdatePermission.map((function(t){return t.id})).filter((function(t){return""!=t})).join(",");this.selectedUpdatePermission!=[]&&""!=this.selectedUpdateMType?(this.$PostValue({paramName:"$loading",data:!0}),this.$API.updateRolePermission(this.selectedUpdateMType,e,t,this.updateRolePermissionCallback)):alert("請輸入完整資訊!")},updateRolePermissionCallback:function(){this.$API.getPermission(this.getPermissionCallback),alert("權限更新成功!"),this.selectedUpdateMType="",this.selectedUpdatePermission=[],this.showModals.updatePermissions=!1,this.$PostValue({paramName:"$loading",data:!1})},cancelUpdatePermission:function(){this.selectedUpdateMType="",this.selectedUpdatePermission=[],this.showModals.updatePermissions=!1},updatePermissions:function(t){var e=this;this.selectedUpdateMType=t.m_type,this.selectedUpdatePermission=[],t.permission.split(",").forEach((function(t){var a=e.permissionNameIndex.indexOf(Number(t));e.selectedUpdatePermission.push({id:e.permissionNameTable[a].id,callApi:e.permissionNameTable[a].callApi})})),this.showModals.updatePermissions=!0},getPermissionCallback:function(t){var e=this;this.permissionOptions=[],this.permissionNameTable=t.response,this.permissionNameIndex=t.response.map((function(t){return t.id})),t.response.forEach((function(t){e.permissionOptions.push({text:t.title,value:{id:t.id,callApi:t.callApi}})})),this.$API.getPermissionMember((function(t){t.response.forEach((function(t){var a=[];t.permission.split(",").forEach((function(t){var s=e.permissionNameIndex.indexOf(Number(t));a.push(e.permissionNameTable[s].title)})),t["permissionName"]=a.join(",")})),e.tableData=t.response})),this.$PostValue({paramName:"$loading",data:!1})}}}),U=R,j=Object(r["a"])(U,I,O,!1,null,null,null),V=j.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("card",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"form-group column-sizing"},[a("div",{staticClass:"col-sm-10"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-1 col-form-label"},[t._v("開始日期")]),a("div",{staticClass:"col-md-3"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.st,callback:function(e){t.$set(t.model,"st",e)},expression:"model.st"}})],1),a("label",{staticClass:"col-md-1 col-form-label"},[t._v("結束日期")]),a("div",{staticClass:"col-md-4"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.et,callback:function(e){t.$set(t.model,"et",e)},expression:"model.et"}})],1),a("p-button",{attrs:{type:"primary"},on:{click:t.queryHours}},[t._v("查詢")])],1)])]),a("div",{staticStyle:{width:"100%",margin:"10px"}},[a("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇活動種類"},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.selects,(function(t){return a("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1),a("div",[t._l(t.hoursData,(function(e,s){return a("div",{key:s+"h",staticClass:"col-lg-3 col-sm-6",staticStyle:{float:"left"},on:{click:function(a){return t.getMemDetails(e.mid)}}},[a("circle-chart-card",{attrs:{percentage:Number((e.total_time/30*100).toFixed(2))>100?100:Number((e.total_time/30*100).toFixed(2)),"chart-id":"email-statistics-chart",title:e.name,description:"搜尋區段時數/30小時",color:"#4acccd"}},[a("template",{slot:"footer"},[a("div",{staticClass:"legend"},[a("i",{staticClass:"nc-icon nc-chart-pie-36"}),t._v(" 小時占比 ")]),a("hr"),a("div",{staticClass:"stats"},[a("i",{staticClass:"fa fa-calendar"}),t._v(" 總時數(小時): "+t._s(e.total_time)+" 小時 ")])])],2)],1)})),t._l(t.threeYearhoursData,(function(e,s){return a("div",{key:s,staticClass:"col-lg-3 col-sm-6",staticStyle:{float:"left"},on:{click:function(a){return t.getThreeYearMemDetails(e.mid)}}},[a("circle-chart-card",{attrs:{percentage:Number((e.total_time/300*100).toFixed(2))>100?100:Number((e.total_time/300*100).toFixed(2)),"chart-id":"email-statistics-chart",title:e.name+" 志工榮譽卡達成率",description:"3年內時數/300小時",color:"#EB7A77"}},[a("template",{slot:"footer"},[a("div",{staticClass:"legend"},[a("i",{staticClass:"nc-icon nc-calendar-60"}),t._v(" "+t._s(t.threeYearSt)+" ~ "+t._s(t.threeYearEt)),a("br")]),a("hr"),a("div",{staticClass:"stats"},[a("i",{staticClass:"fa fa-calendar"}),t._v(" 總時數(小時): "+t._s(e.total_time)+" 小時 ")])])],2)],1)}))],2)],1)},E=[],Y={extends:h["a"],data:function(){return{selects:[{value:"-1",label:"全部"},{value:"0",label:"聯誼會活動"},{value:"1",label:"家友會活動"},{value:"2",label:"祥和志工隊活動"}],model:{type:"-1",st:new Date((new Date).getFullYear()+"-01-01 00:00:00").toISOString(),et:(new Date).toISOString()},hoursData:[],threeYearhoursData:[],threeYearSt:"",threeYearEt:""}},watch:{"model.type":function(t){var e=this;this.$PostValue({paramName:"$loading",data:!0});var a=this.model.st.replace("T"," ");a=a.slice(0,19);var s=this.model.et.replace("T"," ");s=s.slice(0,19),this.$API.getPersonalHours(this.$UserInf.LoginData.mid,a,s,t,(function(t){e.hoursData=[],e.$nextTick((function(){e.hoursData=t.response.hourData})),e.$PostValue({paramName:"$loading",data:!1})}))}},computed:{},mounted:function(){this.queryHours()},methods:{getMemDetails:function(t){var e=this.model.st.replace("T"," ");e=e.slice(0,19);var a=this.model.et.replace("T"," ");a=a.slice(0,19),this.$router.push("/lobby/sign-detail/"+t+"*"+e+"*"+a+"*"+this.model.type)},getThreeYearMemDetails:function(t){this.$router.push("/lobby/sign-detail/"+t+"*"+this.threeYearSt+"*"+this.threeYearEt+"*2")},queryHours:function(){this.$PostValue({paramName:"$loading",data:!0});var t=this.model.st.replace("T"," ");t=t.slice(0,19);var e=this.model.et.replace("T"," ");e=e.slice(0,19),this.$API.getPersonalHours(this.$UserInf.LoginData.mid,t,e,this.model.type,this.getPersonalHoursCallback)},getThreeYearHoursCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),this.threeYearhoursData=t.response.hourData,this.threeYearSt=t.response.st,this.threeYearEt=t.response.et},getPersonalHoursCallback:function(t){this.hoursData=t.response.hourData;var e=new Date,a=e.getTime();e.setTime(a-94608e6),this.$API.getPersonalHours(this.$UserInf.LoginData.mid,this.$TS.getDate(e),this.$TS.getDate(new Date),"2",this.getThreeYearHoursCallback)}}},L=Y,z=Object(r["a"])(L,H,E,!1,null,null,null),q=z.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[s("card",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"form-group column-sizing"},[s("div",{staticClass:"col-sm-10"},[s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-1 col-form-label"},[t._v("開始日期")]),s("div",{staticClass:"col-md-3"},[s("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.st,callback:function(e){t.$set(t.model,"st",e)},expression:"model.st"}})],1),s("label",{staticClass:"col-md-1 col-form-label"},[t._v("結束日期")]),s("div",{staticClass:"col-md-4"},[s("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.et,callback:function(e){t.$set(t.model,"et",e)},expression:"model.et"}})],1),s("p-button",{attrs:{type:"primary"},on:{click:t.queryHours}},[t._v("查詢")])],1)])]),s("div",{staticStyle:{width:"100%",margin:"10px"}},[s("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇活動種類"},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.selects,(function(t){return s("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1),s("card",{staticClass:"card-subcategories",attrs:{type:"plain"}},[s("template",{slot:"header"},[s("h4",{staticClass:"card-title text-center"},[t._v("會員時數總覽(點擊會員可看詳細資訊)")]),s("br")]),s("tabs",{attrs:{pills:"",type:"primary",icons:"",centered:"","tab-content-classes":"tab-space"}},[s("tab-pane",{key:"home",attrs:{id:"home"}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"nc-icon nc-chart-pie-36"}),t._v(" 時數儀錶板 ")]),s("div",t._l(t.hoursData,(function(e,a){return s("div",{key:a,staticClass:"col-lg-3 col-sm-6",staticStyle:{float:"left"},on:{click:function(a){return t.getMemDetails(e.mid)}}},[s("circle-chart-card",{attrs:{percentage:Number((e.total_time/30*100).toFixed(2))>100?100:Number((e.total_time/30*100).toFixed(2)),"chart-id":"email-statistics-chart",title:e.name,description:"搜尋區段時數/30小時",color:"#4acccd"}},[s("template",{slot:"footer"},[s("div",{staticClass:"legend"},[s("i",{staticClass:"nc-icon nc-chart-pie-36"}),t._v(" 小時占比 ")]),s("hr"),s("div",{staticClass:"stats"},[s("i",{staticClass:"fa fa-calendar"}),t._v(" 總時數(小時): "+t._s(e.total_time)+" 小時 ")])])],2)],1)})),0)]),s("tab-pane",{key:"messages",attrs:{id:"messages"}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"nc-icon nc-trophy"}),t._v(" 時數排行榜 ")]),s("el-table",{attrs:{data:t.hoursData}},[s("el-table-column",{attrs:{"min-width":"50",type:"index"}}),s("el-table-column",{attrs:{width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.$index?s("img",{attrs:{src:a("2b73")}}):t._e(),1==e.$index?s("img",{attrs:{src:a("a350")}}):t._e(),2==e.$index?s("img",{attrs:{src:a("dada")}}):t._e()]}}])}),s("el-table-column",{attrs:{"min-width":"50",prop:"name",label:"名稱"}}),s("el-table-column",{attrs:{"min-width":"50",prop:"total_time",label:"總時數"}}),s("el-table-column",{attrs:{"min-width":"50",label:"詳細資訊"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return s("div",{staticClass:"td-actions"},[s("p-button",{attrs:{type:"danger",size:"sm",simple:"",icon:""},on:{click:function(e){return t.getMemDetails(a.mid)}}},[s("i",{staticClass:"nc-icon nc-single-copy-04"})])],1)}}])})],1)],1)],1)],2)],1)},B=[],J={extends:h["a"],data:function(){return{selects:[{value:"-1",label:"全部"},{value:"0",label:"聯誼會活動"},{value:"1",label:"家友會活動"},{value:"2",label:"祥和志工隊活動"}],model:{type:"-1",st:new Date((new Date).getFullYear()+"-01-01 00:00:00").toISOString(),et:(new Date).toISOString()},hoursData:[]}},computed:{},mounted:function(){this.queryHours()},watch:{"model.type":function(t){var e=this;this.$PostValue({paramName:"$loading",data:!0});var a=this.model.st.replace("T"," ");a=a.slice(0,19);var s=this.model.et.replace("T"," ");s=s.slice(0,19),this.$API.getPersonalHours("all",a,s,t,(function(t){e.hoursData=[],e.$nextTick((function(){e.hoursData=t.response.hourData})),e.$PostValue({paramName:"$loading",data:!1})}))}},methods:{getMemDetails:function(t){var e=this.model.st.replace("T"," ");e=e.slice(0,19);var a=this.model.et.replace("T"," ");a=a.slice(0,19),this.$router.push("/lobby/sign-detail/"+t+"*"+e+"*"+a+"*"+this.model.type)},queryHours:function(){this.$PostValue({paramName:"$loading",data:!0});var t=this.model.st.replace("T"," ");t=t.slice(0,19);var e=this.model.et.replace("T"," ");e=e.slice(0,19),this.$API.getPersonalHours("all",t,e,this.model.type,this.getPersonalHoursCallback)},getPersonalHoursCallback:function(t){this.hoursData=t.response.hourData,this.$PostValue({paramName:"$loading",data:!1})}}},W=J,Z=Object(r["a"])(W,F,B,!1,null,null,null),G=Z.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[s("card",{staticClass:"card-subcategories",attrs:{type:"plain"}},[s("template",{slot:"header"},[s("h4",{staticClass:"card-title text-center"},[t._v("會員榮譽卡達成率(點擊會員可看詳細資訊)")]),s("br")]),s("tabs",{attrs:{pills:"",type:"primary",icons:"",centered:"","tab-content-classes":"tab-space"}},[s("tab-pane",{key:"home",attrs:{id:"home"}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"nc-icon nc-chart-pie-36"}),t._v(" 榮譽卡達成率儀錶板 ")]),s("div",t._l(t.threeYearhoursData,(function(e,a){return s("div",{key:a,staticClass:"col-lg-3 col-sm-6",staticStyle:{float:"left"},on:{click:function(a){return t.getThreeYearMemDetails(e.mid)}}},[s("circle-chart-card",{attrs:{percentage:Number((e.total_time/300*100).toFixed(2))>100?100:Number((e.total_time/300*100).toFixed(2)),"chart-id":"email-statistics-chart",title:e.name+" 志工榮譽卡達成率",description:"3年內時數/300小時",color:"#EB7A77"}},[s("template",{slot:"footer"},[s("div",{staticClass:"legend"},[s("i",{staticClass:"nc-icon nc-calendar-60"}),t._v(" "+t._s(t.threeYearSt)+" ~ "+t._s(t.threeYearEt)),s("br")]),s("hr"),s("div",{staticClass:"stats"},[s("i",{staticClass:"fa fa-calendar"}),t._v(" 總時數(小時): "+t._s(e.total_time)+" 小時 ")])])],2)],1)})),0)]),s("tab-pane",{key:"messages",attrs:{id:"messages"}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"nc-icon nc-trophy"}),t._v(" 榮譽卡達成率排行榜 ")]),s("el-table",{attrs:{data:t.threeYearhoursData}},[s("el-table-column",{attrs:{"min-width":"50",type:"index"}}),s("el-table-column",{attrs:{width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.$index?s("img",{attrs:{src:a("2b73")}}):t._e(),1==e.$index?s("img",{attrs:{src:a("a350")}}):t._e(),2==e.$index?s("img",{attrs:{src:a("dada")}}):t._e()]}}])}),s("el-table-column",{attrs:{"min-width":"50",prop:"name",label:"名稱"}}),s("el-table-column",{attrs:{"min-width":"50",prop:"total_time",label:"總時數"}}),s("el-table-column",{attrs:{"min-width":"50",label:"詳細資訊"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return s("div",{staticClass:"td-actions"},[s("p-button",{attrs:{type:"danger",size:"sm",simple:"",icon:""},on:{click:function(e){return t.getThreeYearMemDetails(a.mid)}}},[s("i",{staticClass:"nc-icon nc-single-copy-04"})])],1)}}])})],1)],1)],1)],2)],1)},Q=[],X={extends:h["a"],data:function(){return{threeYearhoursData:[],threeYearSt:"",threeYearEt:""}},computed:{},mounted:function(){this.queryHours()},methods:{getThreeYearMemDetails:function(t){this.$router.push("/lobby/sign-detail/"+t+"*"+this.threeYearSt+"*"+this.threeYearEt+"*2")},queryHours:function(){this.$PostValue({paramName:"$loading",data:!0});var t=new Date,e=t.getTime();t.setTime(e-94608e6),this.$API.getPersonalHours("all",this.$TS.getDate(t),this.$TS.getDate(new Date),"2",this.getThreeYearHoursCallback)},getThreeYearHoursCallback:function(t){var e=this;this.$PostValue({paramName:"$loading",data:!1}),this.threeYearhoursData=[],this.$nextTick((function(){e.threeYearhoursData=t.response.hourData})),this.threeYearSt=t.response.st,this.threeYearEt=t.response.et}}},tt=X,et=Object(r["a"])(tt,K,Q,!1,null,null,null),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("p-button",{attrs:{type:"info",icon:"",round:""},on:{click:t.previousPage}},[a("i",{staticClass:"nc-icon nc-minimal-left"})]),a("el-table",{staticClass:"table-striped",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"start_sign_time",label:"簽到時間"}}),a("el-table-column",{attrs:{prop:"end_sign_time",label:"簽退時間"}}),a("el-table-column",{attrs:{prop:"action_name",label:"活動名稱"}}),a("el-table-column",{attrs:{prop:"total_time",label:"時數"}})],1),a("p-pagination",{attrs:{type:"danger","page-count":t.totalPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},it=[],lt={extends:h["a"],data:function(){return{totalPage:1,currentPage:1,tableData:[]}},computed:{},mounted:function(){this.getSignDetail(1)},watch:{currentPage:function(t){this.getSignDetail(t)}},methods:{previousPage:function(){this.$router.go(-1)},getSignDetail:function(t){this.$PostValue({paramName:"$loading",data:!0});var e=this.$route.params.id.split("*");this.$API.getSignDetail(e[0],e[1],e[2],e[3],t,this.getSignDetailCallback)},getSignDetailCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),this.totalPage=Number(t.signDetailData.totalPage),this.currentPage=Number(t.signDetailData.currentPage),this.tableData=t.signDetailData.data}}},nt=lt,ot=Object(r["a"])(nt,st,it,!1,null,null,null),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[s("card",{staticClass:"form-group column-sizing"},[s("div",{staticClass:"col-sm-10"},[s("div",{staticClass:"row"},[s("label",{staticClass:"col-md-1 col-form-label"},[t._v("開始日期")]),s("div",{staticClass:"col-md-2"},[s("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.st,callback:function(e){t.$set(t.model,"st",e)},expression:"model.st"}})],1),s("label",{staticClass:"col-md-1 col-form-label"},[t._v("結束日期")]),s("div",{staticClass:"col-md-2"},[s("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.et,callback:function(e){t.$set(t.model,"et",e)},expression:"model.et"}})],1),s("label",{staticClass:"col-md-1 col-form-label"},[t._v("活動種類")]),s("div",{staticClass:"col-md-2"},[s("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇活動種類"},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.selects,(function(t){return s("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1),s("p-button",{attrs:{type:"primary"},on:{click:t.queryHours}},[t._v("查詢")])],1)])]),s("card",{staticClass:"card-subcategories",attrs:{type:"plain"}},[s("template",{slot:"header"},[s("h4",{staticClass:"card-title text-center"},[t._v("會員時數總覽(點擊會員可看詳細資訊)")]),s("br")]),s("el-table",{attrs:{data:t.hoursData}},[s("el-table-column",{attrs:{"min-width":"50",type:"index"}}),s("el-table-column",{attrs:{width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.$index?s("img",{attrs:{src:a("2b73")}}):t._e(),1==e.$index?s("img",{attrs:{src:a("a350")}}):t._e(),2==e.$index?s("img",{attrs:{src:a("dada")}}):t._e()]}}])}),s("el-table-column",{attrs:{"min-width":"50",prop:"name",label:"名稱"}}),s("el-table-column",{attrs:{"min-width":"50",prop:"total_time",label:"總時數"}}),s("el-table-column",{attrs:{"min-width":"50",label:"詳細資訊"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return s("div",{staticClass:"td-actions"},[s("p-button",{attrs:{type:"danger",size:"sm",simple:"",icon:""},on:{click:function(e){return t.getMemDetails(a.mid)}}},[s("i",{staticClass:"nc-icon nc-single-copy-04"})])],1)}}])})],1)],2)],1)},dt=[],ut={extends:h["a"],data:function(){return{selects:[{value:"-1",label:"全部"},{value:"0",label:"聯誼會活動"},{value:"1",label:"家友會活動"},{value:"2",label:"祥和志工隊活動"}],model:{type:"-1",st:new Date((new Date).getFullYear()+"-01-01 00:00:00").toISOString(),et:(new Date).toISOString()},hoursData:[]}},computed:{},mounted:function(){this.queryHours()},methods:{getMemDetails:function(t){var e=this.model.st.replace("T"," ");e=e.slice(0,19);var a=this.model.et.replace("T"," ");a=a.slice(0,19),this.$router.push("/lobby/sign-detail/"+t+"*"+e+"*"+a+"*"+this.model.type)},queryHours:function(){this.$PostValue({paramName:"$loading",data:!0});var t=this.model.st.replace("T"," ");t=t.slice(0,19);var e=this.model.et.replace("T"," ");e=e.slice(0,19),this.$API.getPersonalHours("all",t,e,this.model.type,this.getPersonalHoursCallback)},getPersonalHoursCallback:function(t){var e=this;this.hoursData=[],this.$nextTick((function(){e.hoursData=t.response.hourData})),this.$PostValue({paramName:"$loading",data:!1})}}},mt=ut,pt=Object(r["a"])(mt,ct,dt,!1,null,null,null),ht=pt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("card",{staticClass:"form-group column-sizing"},[a("div",{staticClass:"col-sm-10"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-1 col-form-label"},[t._v("開始日期")]),a("div",{staticClass:"col-md-2"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.st,callback:function(e){t.$set(t.model,"st",e)},expression:"model.st"}})],1),a("label",{staticClass:"col-md-1 col-form-label"},[t._v("結束日期")]),a("div",{staticClass:"col-md-2"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.model.et,callback:function(e){t.$set(t.model,"et",e)},expression:"model.et"}})],1),a("label",{staticClass:"col-md-1 col-form-label"},[t._v("活動種類")]),a("div",{staticClass:"col-md-2"},[a("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇活動種類"},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.selects,(function(t){return a("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1),a("p-button",{attrs:{type:"primary"},on:{click:t.queryHours}},[t._v("查詢")])],1)])]),a("div",[a("el-table",{attrs:{data:t.hoursData}},[a("el-table-column",{attrs:{"min-width":"50",type:"index"}}),a("el-table-column",{attrs:{"min-width":"50",prop:"name",label:"名稱"}}),a("el-table-column",{attrs:{"min-width":"50",prop:"total_time",label:"總時數"}}),a("el-table-column",{attrs:{"min-width":"50",label:"詳細資訊"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return a("div",{staticClass:"td-actions"},[a("p-button",{attrs:{type:"danger",size:"sm",simple:"",icon:""},on:{click:function(e){return t.getMemDetails(s.mid)}}},[a("i",{staticClass:"nc-icon nc-single-copy-04"})])],1)}}])})],1)],1)],1)},bt=[],vt={extends:h["a"],data:function(){return{selects:[{value:"-1",label:"全部"},{value:"0",label:"聯誼會活動"},{value:"1",label:"家友會活動"},{value:"2",label:"祥和志工隊活動"}],model:{type:"-1",st:new Date((new Date).getFullYear()+"-01-01 00:00:00").toISOString(),et:(new Date).toISOString()},hoursData:[]}},computed:{},mounted:function(){this.queryHours()},methods:{getMemDetails:function(t){var e=this.model.st.replace("T"," ");e=e.slice(0,19);var a=this.model.et.replace("T"," ");a=a.slice(0,19),this.$router.push("/lobby/sign-detail/"+t+"*"+e+"*"+a+"*"+this.model.type)},queryHours:function(){this.$PostValue({paramName:"$loading",data:!0});var t=this.model.st.replace("T"," ");t=t.slice(0,19);var e=this.model.et.replace("T"," ");e=e.slice(0,19),this.$API.getPersonalHours(this.$UserInf.LoginData.mid,t,e,this.model.type,this.getPersonalHoursCallback)},getPersonalHoursCallback:function(t){this.hoursData=t.response.hourData,this.$PostValue({paramName:"$loading",data:!1})}}},gt=vt,yt=Object(r["a"])(gt,ft,bt,!1,null,null,null),$t=yt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$loading,expression:"$loading"}]},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-body"},[a("form",{staticClass:"form-horizontal",attrs:{method:"get",action:"/"}},[a("fieldset",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label"},[t._v("補簽到活動")]),a("div",{staticClass:"col-sm-10"},[a("el-select",{staticClass:"select-danger",attrs:{placeholder:"請選擇補簽到活動"},model:{value:t.aid,callback:function(e){t.aid=e},expression:"aid"}},t._l(t.selects,(function(t){return a("el-option",{key:t.label,staticClass:"select-danger",attrs:{value:t.value,label:t.label}})})),1)],1)])]),a("fieldset",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label"},[t._v("補簽到會員")]),a("div",{staticClass:"col-sm-10"},[a("model-select",{attrs:{options:t.options,placeholder:"輸入會員名稱"},model:{value:t.itemxx,callback:function(e){t.itemxx=e},expression:"itemxx"}})],1)])]),a("fieldset",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label"},[t._v("補簽到時間")]),a("div",{staticClass:"col-sm-10"},[a("datetime",{attrs:{type:"datetime","value-zone":"Asia/Taipei","use12-hour":""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)])]),a("fieldset",[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-10"},[a("p-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"info"},on:{click:t.makeUpSignIn}},[t._v("補簽到")]),a("p-button",{attrs:{type:"danger"},on:{click:t.makeUpSignOut}},[t._v("補簽退")])],1)])]),a("fieldset",[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-10"},[a("div",{staticStyle:{color:"green"}},[t._v(" 補簽到結果:"+t._s(t.signResult))])])])])])])])])])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-title"},[t._v("補簽到")])])}],wt=(a("b0c0"),{extends:h["a"],components:{ModelSelect:A["ModelSelect"]},computed:{options:function(){var t=this,e=[];return Object.keys(this.$midTable).forEach((function(a,s){e.push({value:a,text:Object.values(t.$midTable)[s]})})),e}},data:function(){return{selects:[],aid:"",time:"",itemxx:{value:"",text:""},signResult:""}},created:function(){this.$PostValue({paramName:"$loading",data:!0}),this.$API.getActionList(null,null,this.getActionListCallback)},methods:{makeUpSignIn:function(){if(""!=this.aid&&""!=this.itemxx.value&&""!=this.time){this.$PostValue({paramName:"$loading",data:!0});var t=this.time.replace("T"," ");t=t.slice(0,19),this.$API.makeUpSignIn(this.itemxx.value,this.aid,"signIn",t,this.makeUpSignInCallback)}else alert("請輸入完整資訊!")},makeUpSignInCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),alert("補簽成功!"),this.signResult="名稱:"+t.response.name+" 活動:"+t.response.action_name+" 簽到時間:"+t.response.start_sign_time+" 簽退時間:"+t.response.end_sign_time},makeUpSignOut:function(){if(""!=this.aid&&""!=this.itemxx.value&&""!=this.time){this.$PostValue({paramName:"$loading",data:!0});var t=this.time.replace("T"," ");t=t.slice(0,19),this.$API.makeUpSignIn(this.itemxx.value,this.aid,"signOut",t,this.makeUpSignOutCallback)}else alert("請輸入完整資訊!")},makeUpSignOutCallback:function(t){this.$PostValue({paramName:"$loading",data:!1}),alert("補簽成功!"),this.signResult="名稱:"+t.response.name+" 活動:"+t.response.action_name+" 簽到時間:"+t.response.start_sign_time+" 簽退時間:"+t.response.end_sign_time},getActionListCallback:function(t){var e=this;this.$PostValue({paramName:"$loading",data:!1}),1===t.callState?alert(t.errorMsg):(this.selects=[],t.forEach((function(t){e.selects.push({value:t.aid,label:t.name+" "+t.startdate+"~"+t.enddate})})))}}}),kt=wt,xt=Object(r["a"])(kt,_t,Ct,!1,null,null,null),Pt=xt.exports,Dt=a("8c4f"),At=[{path:"/",component:u["a"]},{path:"/lobby",name:"lobby",component:$,redirect:"/lobby/personal-mem-hours",children:[{path:"active-list",name:"active-list",component:T},{path:"permission-manage",name:"permission-manage",component:V},{path:"personal-mem-hours",name:"personal-mem-hours",component:q},{path:"mems-hours",name:"mems-hours",component:G},{path:"mems-honor-card",name:"mems-honor-card",component:at},{path:"sign-detail/:id",name:"sign-detail",component:rt},{path:"total-count-table",name:"total-count-table",component:ht},{path:"personal-count-table",name:"personal-count-table",component:$t},{path:"make-up-signIn",name:"make-up-signIn",component:Pt}]}];s["default"].use(Dt["a"]);var St=new Dt["a"]({mode:"hash",routes:At,linkActiveClass:"active"}),Mt=St,Nt=a("89bf"),Tt=a("ceb6"),It=a("b745"),Ot=a("fd46");s["default"].use(Tt["a"]),s["default"].use(It["a"]),s["default"].use(Ot["a"]),s["default"].config.productionTip=!1,new s["default"]({router:Mt,render:function(t){return t(d)},store:Nt["a"]}).$mount("#app")},"2b73":function(t,e,a){t.exports=a.p+"img/win_1.34c47361.png"},a350:function(t,e,a){t.exports=a.p+"img/win_2.a6ced061.png"},dada:function(t,e,a){t.exports=a.p+"img/win_3.eb83d0ca.png"}});